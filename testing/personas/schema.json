{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Educator Builder Test Persona",
  "type": "object",
  "required": ["id", "name", "archetype", "behavioral", "cognitive", "objectives", "conversationStyle", "termination", "opening", "targetRubricDimensions", "expectedDialogueActs"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z-]+$",
      "description": "Unique identifier (e.g., 'philosophical-thinker')"
    },
    "name": {
      "type": "string",
      "description": "Human-readable name"
    },
    "archetype": {
      "type": "string",
      "enum": ["seeker", "skeptic", "performer", "builder", "learner"],
      "description": "High-level behavioral category"
    },
    "tier": {
      "type": "string",
      "enum": ["standard", "challenging"],
      "default": "standard",
      "description": "Persona difficulty level for testing"
    },
    "behavioral": {
      "type": "object",
      "required": ["communicationStyle", "reasoningStyle", "authenticityLevel"],
      "properties": {
        "communicationStyle": {
          "type": "string",
          "enum": ["articulate", "exploratory", "transactional", "vague", "performative"],
          "description": "Primary communication pattern"
        },
        "reasoningStyle": {
          "type": "string",
          "enum": ["philosophical", "practical", "systems-oriented", "surface-level"],
          "description": "How they approach problems"
        },
        "authenticityLevel": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "description": "1=highly performative, 10=radically honest"
        },
        "questioningDepth": {
          "type": "string",
          "enum": ["deep-philosophical", "curious-practical", "logistics-only", "none"],
          "description": "What kinds of questions they ask"
        },
        "responsePatterns": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Typical behavioral patterns (e.g., 'asks follow-up questions', 'avoids difficult topics')"
        }
      }
    },
    "cognitive": {
      "type": "object",
      "properties": {
        "selfAwareness": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "description": "Clarity about own values and goals"
        },
        "systemsThinking": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "description": "Ability to see interconnections"
        },
        "valuesProfile": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Core values driving behavior (e.g., 'autonomy', 'security', 'connection')"
        }
      }
    },
    "constraints": {
      "type": "object",
      "properties": {
        "avoidancePatterns": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Topics or behaviors to avoid"
        },
        "conversationalLimits": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Structural constraints (e.g., 'maximum 2 questions per turn')"
        }
      }
    },
    "targetRubricDimensions": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["depth-of-questioning", "self-awareness", "systems-thinking", "experimentation-evidence", "authenticity", "reciprocal-curiosity"]
      },
      "description": "Which rubric criteria this persona is designed to test",
      "minItems": 1
    },
    "expectedDialogueActs": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["open_with_question", "probe_deeper", "ask_for_concrete", "validate_genuine", "redirect_from_surface", "reflect_understanding", "affirm_commitment"]
      },
      "description": "Dialogue acts this persona should elicit from AI",
      "minItems": 1
    },
    "objectives": {
      "type": "object",
      "required": ["primary", "mustAnswer"],
      "properties": {
        "primary": {
          "type": "string",
          "description": "The main goal this persona is pursuing in the conversation"
        },
        "mustAnswer": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Critical questions that must be answered for satisfaction",
          "minItems": 1
        },
        "satisfactionSignals": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Signals that indicate the persona is getting what they need",
          "examples": ["concrete examples", "acknowledgment of tension", "genuine response"]
        },
        "dissatisfactionSignals": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Red flags that indicate misalignment",
          "examples": ["vague answers", "sales pressure", "dismissal of concerns"]
        }
      }
    },
    "conversationStyle": {
      "type": "object",
      "required": ["promptGuidance"],
      "properties": {
        "turnStructure": {
          "type": "object",
          "properties": {
            "alwaysReactFirst": {
              "type": "boolean",
              "description": "Should this persona acknowledge what was said before asking new questions?"
            },
            "circleBackToUnanswered": {
              "type": "boolean",
              "description": "Should persona keep returning to unanswered critical questions?"
            },
            "questionsPerTurn": {
              "type": "string",
              "description": "Expected number of questions per turn (e.g., '1-2')"
            }
          }
        },
        "promptGuidance": {
          "type": "string",
          "description": "High-level guidance for how the LLM should generate this persona's responses"
        }
      }
    },
    "termination": {
      "type": "object",
      "required": ["minTurns", "maxTurns"],
      "properties": {
        "minTurns": {
          "type": "integer",
          "minimum": 2,
          "description": "Minimum number of turns before conversation can end"
        },
        "maxTurns": {
          "type": "integer",
          "minimum": 3,
          "description": "Maximum number of turns before conversation must end"
        },
        "positiveExit": {
          "type": "string",
          "description": "Condition for ending conversation with agreement/alignment"
        },
        "negativeExit": {
          "type": "string",
          "description": "Condition for ending conversation with rejection/misalignment"
        },
        "neutralExit": {
          "type": "string",
          "description": "Condition for ending conversation without clear resolution"
        }
      }
    },
    "opening": {
      "type": "object",
      "required": ["firstMessage"],
      "properties": {
        "firstMessage": {
          "type": "string",
          "description": "The exact first message from this persona"
        },
        "initialMood": {
          "type": "string",
          "description": "Emotional/conversational tone for the opening (e.g., 'curious but evaluating')"
        }
      }
    },
    "testingNotes": {
      "type": "string",
      "description": "Why this persona exists and what behaviors it validates"
    }
  }
}
